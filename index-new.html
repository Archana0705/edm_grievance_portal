<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>e-Sevai Grievance Portal</title>

  <!-- Bootstrap 5.3 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- AOS Animation -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #0d6efd, #4da6ff, #e6f0ff);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
    }

    @keyframes gradientBG {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .portal-title {
      font-weight: 700;
      font-size: 1.5rem;
      color: #fff;
      text-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    .card {
      border-radius: 20px;
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.85);
      box-shadow: 0 6px 30px rgba(0,0,0,0.1);
    }

    .screen { display: none; }

    .otp-input {
      width: 50px; height: 55px;
      text-align: center;
      font-size: 22px;
      margin: 6px;
      border-radius: 12px;
    }

    .step-icon {
      font-size: 40px;
      color: #0d6efd;
      margin-bottom: 15px;
    }

    .btn {
      border-radius: 12px;
      font-weight: 600;
    }

    .success-icon {
      font-size: 70px;
      color: #198754;
      animation: pop 0.5s ease;
    }

    @keyframes pop {
      0% {transform: scale(0.5); opacity: 0;}
      100% {transform: scale(1); opacity: 1;}
    }

    .form-control, .form-select {
      border-radius: 12px;
      padding: 12px;
      font-size: 0.95rem;
    }

    .info-text {
      font-size: 0.85rem;
      color: #6c757d;
    }
  </style>
</head>
<body class="d-flex justify-content-center align-items-center vh-100">

<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-5">
      <div class="text-center mb-4">
        <h2 class="portal-title">e-Sevai Grievance Portal</h2>
        <p class="text-light">Seamless Citizen Services • Raise & Track Grievances</p>
      </div>

      <div class="card p-4 text-center" data-aos="fade-up">

        <!-- Screen 1 Mobile -->
        <div class="screen screen1">
          <i class="fa-solid fa-mobile-screen step-icon"></i>
          <h4 class="mb-3">Citizen Login – Mobile</h4>
          <p class="info-text">Login with your registered mobile number</p>

          <div class="mb-3 text-start">
            <label for="mobileInput" class="form-label fw-semibold">Mobile Number</label>
            <input type="text" id="mobileInput" class="form-control" placeholder="Enter mobile number"> 
            <small class="form-text text-muted">OTP will be sent to your number.</small>
            <div class="invalid-feedback">Please enter a valid 10-digit mobile number.</div>
          </div>  

          <button id="continueBtn" class="btn btn-primary w-100">Continue</button>
        </div>

        <!-- Screen 2 OTP -->
        <div class="screen screen2">
          <i class="fa-solid fa-key step-icon"></i>
          <h4 class="mb-3">Verify OTP</h4>
          <p class="info-text">Enter the 6-digit OTP sent to your mobile</p>
          <div class="d-flex justify-content-center mb-3">
            <input type="text" maxlength="1" class="otp-input form-control">
            <input type="text" maxlength="1" class="otp-input form-control">
            <input type="text" maxlength="1" class="otp-input form-control">
            <input type="text" maxlength="1" class="otp-input form-control">
            <input type="text" maxlength="1" class="otp-input form-control">
            <input type="text" maxlength="1" class="otp-input form-control">
          </div>
          <p class="text-muted"><span id="timer">Resend OTP in 02:00</span></p>
          <button class="btn btn-success w-100 next2">Verify OTP</button>
        </div>

        <!-- Screen 3 Profile -->
        <div class="screen screen3">
          <i class="fa-solid fa-user step-icon"></i>
          <h4 class="mb-3" id="profileTitle">Citizen Profile Creation</h4>
          <p class="info-text">Fill in your basic details to continue</p>

          <input type="text" id="nameField" class="form-control mb-2" placeholder="Enter your Name" required>
          <select id="genderField" class="form-select mb-2" required>
            <option selected>Select Gender</option>
            <option>Male</option>
            <option>Female</option>
            <option>Other</option>
          </select>
          <input type="text" id="mobileField" class="form-control mb-2" value="9876543210" readonly>
          <select id="districtField" class="form-select mb-2" required>
            <option selected>Select District</option>
            <option>Coimbatore</option>
            <option>Madurai</option>
          </select>
          <input type="email" id="emailField" class="form-control mb-3" placeholder="Enter your Email (optional)">

          <button class="btn btn-primary w-100 mb-3 next3">Continue</button>
        </div>

        <!-- Screen 5 Success -->
        <div class="screen screen5">
          <div class="success-icon mb-3">✅</div>
          <h4>Profile Created Successfully!</h4>
          <p class="info-text">You can now raise grievances and track requests.</p>
          <a href="dashboard.html" class="btn btn-success w-100 mt-3">Go to Dashboard</a>
        </div>

      </div>
    </div>
  </div>
</div>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
AOS.init();

// Show first screen
$(".screen1").show();

// Validate mobile number
function isValidMobile(number) {
  return /^[6-9]\d{9}$/.test(number);
}

// Continue button click (mobile)
$("#continueBtn").on("click", function(){
  const mobile = $("#mobileInput").val().trim();
  
  if(!isValidMobile(mobile)){
    $("#mobileInput").addClass("is-invalid");
    return;
  }
  $("#mobileInput").removeClass("is-invalid");

  // Show OTP screen
  $(".screen").hide();
  $(".screen2").fadeIn();
  startTimer(120, "#timer");
});

// Remove error instantly on input
$("#mobileInput").on("input", function(){
  if(isValidMobile($(this).val().trim())){
    $(this).removeClass("is-invalid");
  }
});

// OTP auto focus
$(document).on("keyup", ".otp-input", function(){
  if(this.value.length === this.maxLength){
    $(this).next(".otp-input").focus();
  }
});

// OTP screen flow
$(".next2").click(function(){ 
  $(".screen").hide(); 
  $(".screen3").fadeIn(); 
});

// Continue button in profile (go directly to success)
$(".next3").click(function(){ 
  $(".screen").hide(); 
  $(".screen5").fadeIn(); 
});

// Timer function
function startTimer(duration, selector) {
  let timer = duration, minutes, seconds;
  let interval = setInterval(function () {
    minutes = parseInt(timer / 60, 10);
    seconds = parseInt(timer % 60, 10);
    minutes = minutes < 10 ? "0" + minutes : minutes;
    seconds = seconds < 10 ? "0" + seconds : seconds;
    $(selector).text("Resend OTP in " + minutes + ":" + seconds);
    if (--timer < 0) {
      clearInterval(interval);
      $(selector).html("<a href='#' class='resendLink'>Resend OTP</a>");
    }
  }, 1000);

  $(document).off("click", ".resendLink").on("click", ".resendLink", function(e){
    e.preventDefault();
    startTimer(120, selector);
  });
}
</script>
</body>
</html>
